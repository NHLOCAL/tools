<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>注专 HTML  - 专住 转拽转 住驻转</title>
    
    <!-- 驻 住 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <style>
        :root {
            --primary: #006A60;
            --on-primary: #FFFFFF;
            --primary-container: #74F8E5;
            --on-primary-container: #00201A;
            --secondary: #4A635D;
            --surface: #F4FBF9;
            --surface-container: #E9EFED;
            --outline: #6F7977;
            --error: #BA1A1A;
            
            --editor-bg: #263238;
            --editor-text: #E0E3E2;
            --editor-toolbar-bg: #E9EFED; 
            --editor-toolbar-text: #05201A;

            --header-height: 64px;
            --toolbar-height: 54px;
            --transition-speed: 0.3s;
        }

        body.matrix-mode {
            --primary: #00FF41;
            --on-primary: #000000;
            --primary-container: #003B00;
            --on-primary-container: #00FF41;
            --secondary: #008F11;
            --surface: #0D0208;
            --surface-container: #001100;
            --outline: #00FF41;
            
            --editor-bg: #000000;
            --editor-text: #00FF41;
            --editor-toolbar-bg: #001100;
            --editor-toolbar-text: #00FF41;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }
        
        html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        
        body { 
            font-family: 'Assistant', sans-serif; 
            background-color: var(--surface); 
            color: #191C1B; 
            display: flex;
            flex-direction: column;
            transition: background-color 0.5s, color 0.5s;
        }
        
        body.matrix-mode { color: #00FF41; font-family: 'Fira Code', monospace; }

        /* --- 转专转 注 --- */
        header {
            flex: 0 0 auto;
            height: var(--header-height);
            background-color: var(--primary-container);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 1.5rem;
            border-bottom: 2px solid var(--primary);
            transition: transform var(--transition-speed) ease, height var(--transition-speed) ease, padding 0.3s;
            z-index: 20;
            position: relative;
        }
        
        body.matrix-mode header { border-bottom: 1px solid var(--primary); }

        header.hidden {
            transform: translateY(-100%);
            height: 0;
            padding-top: 0;
            padding-bottom: 0;
            border: none;
            overflow: hidden;
        }

        .logo-area {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            color: var(--primary);
            cursor: pointer;
            user-select: none;
        }

        h1 { font-size: 1.4rem; font-weight: 700; display: flex; align-items: center; gap: 0.5rem; transition: text-shadow 0.3s;}
        body.matrix-mode h1 { text-shadow: 0 0 10px var(--primary); }

        .credits {
            font-size: 0.9rem;
            color: var(--secondary);
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }
        body.matrix-mode .credits { color: var(--primary); opacity: 0.7; }
        .credits a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            transition: opacity 0.2s;
        }
        .credits a:hover { opacity: 0.7; }

        /* --- 专 专砖 (转拽 ) --- */
        main {
            flex: 1;
            display: flex;
            direction: ltr; 
            overflow: hidden;
            position: relative;
            width: 100%;
            min-height: 0; /* 拽专  驻转 转 flex */
        }
        
        /*  爪专 转专 专转  转 住 , -Flex 驻   */

        /* --- 注专 拽 (爪 砖) --- */
        #editor-panel {
            width: 40%; 
            min-width: 300px;
            background-color: var(--editor-bg);
            display: flex;
            flex-direction: column;
            position: relative;
            transition: width 0.1s, transform var(--transition-speed) ease;
            z-index: 10;
            border-right: 1px solid var(--outline);
            height: 100%;
            overflow: hidden;
        }

        body.matrix-mode #editor-panel { border-right: 1px solid var(--primary); }

        #editor-panel.hidden {
            transform: translateX(-100%);
            width: 0 !important;
            min-width: 0;
            border: none;
        }

        .editor-toolbar {
            flex-shrink: 0; /* 注 抓 住专 */
            height: var(--toolbar-height);
            background-color: var(--editor-toolbar-bg);
            color: var(--editor-toolbar-text);
            padding: 0 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid #D0DAD6;
            font-size: 0.9rem;
            user-select: none;
            direction: rtl;
        }
        
        body.matrix-mode .editor-toolbar { border-bottom: 1px solid var(--primary); }

        .toolbar-group { display: flex; align-items: center; gap: 0.5rem; }

        .tool-btn {
            background: transparent;
            border: 1px solid transparent;
            color: var(--primary);
            cursor: pointer;
            padding: 6px 12px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
            font-family: 'Assistant', sans-serif;
            font-weight: 600;
            font-size: 0.85rem;
            transition: all 0.2s;
        }
        body.matrix-mode .tool-btn { font-family: 'Fira Code', monospace; }

        .tool-btn:hover { background-color: rgba(0, 106, 96, 0.08); }
        body.matrix-mode .tool-btn:hover { background-color: rgba(0, 255, 65, 0.2); }
        .tool-btn:active { transform: scale(0.96); }

        .tool-btn.danger { color: var(--error); }
        body.matrix-mode .tool-btn.danger { color: #ff3333; }
        .tool-btn.danger:hover { background-color: rgba(186, 26, 26, 0.08); }

        textarea#code-input {
            flex: 1;
            background-color: var(--editor-bg);
            color: var(--editor-text);
            border: none;
            resize: none;
            padding: 1.5rem;
            font-family: 'Fira Code', monospace;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre-wrap; 
            direction: ltr; 
            text-align: left;
            overflow-y: auto; /*  驻转  */
        }
        
        textarea::-webkit-scrollbar { width: 10px; height: 10px; }
        textarea::-webkit-scrollbar-track { background: var(--editor-bg); }
        textarea::-webkit-scrollbar-corner { background: var(--editor-bg); }
        textarea::-webkit-scrollbar-thumb { background: #3A4542; border-radius: 5px; border: 2px solid var(--editor-bg); }
        textarea::-webkit-scrollbar-thumb:hover { background: var(--primary); }

        /* --- 专专 砖  --- */
        .resizer {
            width: 8px;
            flex-shrink: 0;
            background-color: var(--surface);
            border-left: 1px solid #D0DAD6;
            cursor: col-resize;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
            z-index: 15;
            height: 100%;
        }
        body.matrix-mode .resizer { border-left: 1px solid var(--primary); }
        
        .resizer::after {
            content: '';
            width: 2px;
            height: 20px;
            background-color: #B0BBB8;
            border-radius: 2px;
        }

        .resizer:hover, .resizer.resizing { background-color: var(--primary-container); }
        .resizer:hover::after, .resizer.resizing::after { background-color: var(--primary); }

        /* --- 转爪 拽 --- */
        #preview-panel {
            flex-grow: 1;
            background-color: white;
            position: relative; 
            height: 100%;
            overflow: hidden;
            display: flex; /*  砖  转 */
        }
        
        .iframe-shield {
            position: absolute;
            inset: 0;
            z-index: 100;
            display: none;
        }
        body.resizing .iframe-shield { display: block; }

        iframe#preview-frame {
            width: 100%;
            height: 100%;
            border: none;
            background-color: #fff;
            display: block;
        }

        /* --- 驻转专 住  --- */
        .fab {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 56px;
            height: 56px;
            border-radius: 16px;
            border: 1px solid rgba(0, 106, 96, 0.2);
            background-color: rgba(255, 255, 255, 0.15); 
            color: var(--primary);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
        }

        body.matrix-mode .fab {
            background-color: rgba(0, 50, 0, 0.4);
            border-color: var(--primary);
            box-shadow: 0 0 10px var(--primary);
        }

        .fab:hover {
            transform: scale(1.05);
            background-color: rgba(255, 255, 255, 0.5);
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
        }
        
        body.matrix-mode .fab:hover { background-color: rgba(0, 80, 0, 0.6); }

        [data-tooltip] { position: relative; }
        [data-tooltip]:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(5px);
            background-color: #333;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
            pointer-events: none;
            z-index: 1000;
        }

        @media (max-width: 768px) {
            main { flex-direction: column; }
            #editor-panel { width: 100% !important; height: 40vh; border-right: none; border-bottom: 2px solid var(--primary); flex-shrink: 0; }
            #preview-panel { height: auto; flex-grow: 1; }
            .resizer { display: none; }
            header { padding: 0 1rem; }
            h1 { font-size: 1.2rem; }
            .credits { display: none; }
            .tool-btn span.text { display: none; }
        }
    </style>
</head>
<body>

    <header id="main-header">
        <div class="logo-area" id="easter-egg-trigger" title="拽拽 5 驻注 驻转注">
            <span class="material-symbols-rounded" style="font-size: 2rem;">code_blocks</span>
            <h1>注专 HTML </h1>
        </div>
        <div class="credits">
            <span>
                驻转 注"
                <a href="https://nhlocal.github.io" target="_blank">NH Local</a>
            </span>
            <a href="https://github.com/NHLOCAL/" target="_blank" aria-label="GitHub">
                <i class="fa-brands fa-github" style="font-size: 1.2em;"></i>
            </a>
            <a href="https://tools.ze-kal.top" target="_blank"> 住驻</a>
        </div>
    </header>

    <main id="main-container">
        <!-- 驻 注专 -->
        <div id="editor-panel">
            <div class="editor-toolbar">
                <div class="toolbar-group">
                    <span class="material-symbols-rounded" style="color:var(--primary)">code</span>
                    <span id="line-count" style="font-size: 0.8rem; opacity: 0.8;">0 砖专转</span>
                </div>
                
                <div class="toolbar-group">
                    <button class="tool-btn" id="copy-btn" title="注转拽 拽">
                        <span class="material-symbols-rounded">content_copy</span>
                        <span class="text">注转拽</span>
                    </button>
                    <button class="tool-btn" id="refresh-btn" title="专注 转爪">
                        <span class="material-symbols-rounded">refresh</span>
                        <span class="text">专注</span>
                    </button>
                    <div style="width: 1px; height: 20px; background: #ccc; margin: 0 4px; opacity: 0.5;"></div>
                    <button class="tool-btn danger" id="clear-btn" title="拽  转">
                        <span class="material-symbols-rounded">delete</span>
                        <span class="text">拽</span>
                    </button>
                </div>
            </div>
            
            <textarea id="code-input" placeholder="拽  转 拽 HTML ... 拽 专抓 转." spellcheck="false"></textarea>
        </div>

        <!-- 驻住 专专 -->
        <div class="resizer" id="drag-handle" title="专专 砖 "></div>

        <!-- 驻 转爪 -->
        <div id="preview-panel">
            <div class="iframe-shield"></div>
            <iframe id="preview-frame" sandbox="allow-scripts allow-same-origin allow-modals"></iframe>
        </div>
    </main>

    <button class="fab" id="toggle-view-btn" data-tooltip="住 ">
        <span class="material-symbols-rounded">open_in_full</span>
    </button>

    <script>
        const codeInput = document.getElementById('code-input');
        const previewFrame = document.getElementById('preview-frame');
        const lineCountDisplay = document.getElementById('line-count');
        const toggleBtn = document.getElementById('toggle-view-btn');
        const header = document.getElementById('main-header');
        const editorPanel = document.getElementById('editor-panel');
        const fabIcon = toggleBtn.querySelector('span');
        const refreshBtn = document.getElementById('refresh-btn');
        const clearBtn = document.getElementById('clear-btn');
        const copyBtn = document.getElementById('copy-btn');
        const dragHandle = document.getElementById('drag-handle');
        const mainContainer = document.getElementById('main-container');

        const defaultHTML = `<!-- : 专住 注爪 -->
<style>
  body { 
    font-family: 'Segoe UI', sans-serif; 
    display: flex; 
    justify-content: center; 
    align-items: center; 
    height: 100vh; 
    margin: 0; 
    background: #f0f7f6; 
    direction: rtl;
  .card {
    background: white;
    padding: 2.5rem;
    border-radius: 20px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.08);
    text-align: center;
    max-width: 320px;
  }
  h1 { color: #006A60; margin-top: 0; font-size: 1.8rem; }
  p { color: #555; line-height: 1.6; }
  .btn {
    background: #006A60; color: white; border: none;
    padding: 12px 24px; border-radius: 99px;
    cursor: pointer; font-size: 1rem; margin-top: 1.5rem;
    transition: transform 0.2s;
  }
  .btn:hover { transform: scale(1.05); background: #005048; }
</style>

<div class="card">
  <h1>专 </h1>
  <p> 注专  . <br>拽 爪 砖 专 转 砖  转.</p>
  <button class="btn" onclick="alert(' 注! 注 ')">抓 拽</button>
</div>`;

        codeInput.value = defaultHTML;
        updatePreview();
        updateLineCount();

        codeInput.addEventListener('input', () => {
            updatePreview();
            updateLineCount();
        });

        function updatePreview() {
            const code = codeInput.value;
            const doc = previewFrame.contentDocument || previewFrame.contentWindow.document;
            doc.open();
            doc.write(code);
            doc.close();
        }

        function updateLineCount() {
            const lines = codeInput.value.split('\n').length;
            lineCountDisplay.textContent = lines === 1 ? '砖专 转' : `${lines} 砖专转`;
        }

        let isFullscreen = false;
        toggleBtn.addEventListener('click', () => {
            isFullscreen = !isFullscreen;
            if (isFullscreen) {
                header.classList.add('hidden');
                editorPanel.classList.add('hidden');
                dragHandle.style.display = 'none';
                document.body.classList.add('fullscreen-active');
                
                fabIcon.textContent = 'close_fullscreen';
                toggleBtn.setAttribute('data-tooltip', '爪 住 ');
            } else {
                header.classList.remove('hidden');
                editorPanel.classList.remove('hidden');
                dragHandle.style.display = 'flex';
                document.body.classList.remove('fullscreen-active');
                
                fabIcon.textContent = 'open_in_full';
                toggleBtn.setAttribute('data-tooltip', '住 ');
            }
        });

        refreshBtn.addEventListener('click', () => {
            const icon = refreshBtn.querySelector('.material-symbols-rounded');
            icon.style.transition = 'transform 0.5s';
            icon.style.transform = 'rotate(360deg)';
            updatePreview();
            setTimeout(() => icon.style.transform = 'rotate(0deg)', 500);
        });

        copyBtn.addEventListener('click', async () => {
            try {
                await navigator.clipboard.writeText(codeInput.value);
                const originalText = copyBtn.querySelector('.text').textContent;
                const icon = copyBtn.querySelector('.material-symbols-rounded');
                
                copyBtn.querySelector('.text').textContent = '注转拽!';
                icon.textContent = 'check';
                copyBtn.style.color = 'var(--primary)';
                
                setTimeout(() => {
                    copyBtn.querySelector('.text').textContent = originalText;
                    icon.textContent = 'content_copy';
                    copyBtn.style.color = '';
                }, 2000);
            } catch (err) {
                console.error('Failed to copy', err);
            }
        });

        clearBtn.addEventListener('click', () => {
            codeInput.value = '';
            updatePreview();
            updateLineCount();
            codeInput.focus();
        });

        let isResizing = false;
        dragHandle.addEventListener('mousedown', (e) => {
            isResizing = true;
            document.body.classList.add('resizing');
            dragHandle.classList.add('resizing');
            document.body.style.cursor = 'col-resize';
            e.preventDefault(); 
        });

        document.addEventListener('mousemove', (e) => {
            if (!isResizing) return;
            let newWidth = e.clientX;
            const containerWidth = mainContainer.offsetWidth;
            let widthPercent = (newWidth / containerWidth) * 100;
            if (widthPercent < 15) widthPercent = 15;
            if (widthPercent > 85) widthPercent = 85;
            editorPanel.style.width = `${widthPercent}%`;
        });

        document.addEventListener('mouseup', () => {
            if (isResizing) {
                isResizing = false;
                document.body.classList.remove('resizing');
                dragHandle.classList.remove('resizing');
                document.body.style.cursor = 'default';
            }
        });

        let clickCount = 0;
        let easterEggTimeout;
        const easterEggTrigger = document.getElementById('easter-egg-trigger');

        easterEggTrigger.addEventListener('click', () => {
            clickCount++;
            clearTimeout(easterEggTimeout);
            easterEggTimeout = setTimeout(() => {
                clickCount = 0;
            }, 500);

            if (clickCount >= 5) {
                document.body.classList.toggle('matrix-mode');
                clickCount = 0;
                
                if (document.body.classList.contains('matrix-mode')) {
                    const matrixCode = `<!-- Matrix Mode Activated -->
<style>
body { background: black; color: #0f0; font-family: monospace; overflow: hidden; }
.matrix { position: absolute; top: 0; left: 0; width: 100%; height: 100%; font-size: 20px; text-align: center; }
</style>
<div class="matrix">
  <br><br>
  Wake up, Neo...<br>
  The Matrix has you.<br><br>
  (Press 'Live HTML Editor' 5 times to exit)
</div>`;
                    if(codeInput.value.trim() === '' || codeInput.value.includes(': 专住 注爪')) {
                        codeInput.value = matrixCode;
                        updatePreview();
                    }
                }
            }
        });
    </script>
</body>
</html>